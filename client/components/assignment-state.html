<template name="assignment_state">
  <div class="assignment-state">
    <section class="step-widget not-allowed">
      <div class="indicator"><i class="fa fa-lock"></i></div>
      <div class="content">
        <div class="message">You must login to submit your work.</div>
      </div>
      <div class="action"><i class="fa fa-sign-in" aria-hidden="true"></i></div>
    </section>
  </div>

  <div class="assignment-state">
    <section class="step-widget no-works">
      <div class="indicator">1</div>
      <div class="content">
        <div class="message">Submit your work before due date.</div>
      </div>
      <div class="action"><i class="fa fa-plus"></i></div>
    </section>
  </div>

  <div class="assignment-state">
    <article class="step-widget reviews-step">
      <div class="indicator">2</div>
      <header>reviews</header>
      <section class="content">
        <div class="message">Review the works of other users.</div>
        <div class="message">You have to review at least <strong>5</strong> works</div>
      </section>
      <footer>The more reviews you make, the more you will get for your work.</footer>
      <div class="action"><i class="fa fa-eye"></i></div>
    </article>
  </div>

  <section class="assignment-state">
    <div class="step-widget wait">
      <div class="indicator">3</div>
      <header>Evaluating...</header>
      <section class="content">
        <div class="message">Congratulations, you have completed enough reviews. But, your work is still evaluating.</div>
        <div class="message">You could check the result later or you can keep doing reviews.</div>
      </section>
      <div class="action"><i class="fa fa-hourglass-half"></i></div>
    </div>
  </section>

  <section class="assignment-state">
    <div class="step-widget ready">
      <div class="indicator">4</div>
      <header>Evaluation is ready.</header>
      <section class="content">
        <div class="message">Congratulations, your work has been evaluated.</div>
        <div class="message">Open summary report to look at your grade and to read feedback from peers.</div>
      </section>
      <div class="action"><i class="fa fa-file-text"></i></div>
    </div>
  </section>

  <div class="assignment-state">
    <section class="step-widget passed">
      <div class="indicator"><i class="fa fa-trophy"></i></div>
      <div class="content">
        <div class="message">Congratulations! You pass the assignment.</div>
      </div>
      <div class="action"><i class="fa fa-trophy"></i></div>
    </section>
  </div>

  <div class="assignment-state">
    <section class="step-widget failded">
      <div class="indicator"><i class="fa fa-frown-o"></i></div>
      <div class="content">
        <div class="message">Sorry, you didn't get enough points. Please, fix the errors and resubmit your work.</div>
      </div>
      <div class="action"><i class="fa fa-refresh" aria-hidden="true"></i></div>
    </section>
  </div>

  {{ > assignment_done_reviews }}

  <section class="assignment-state-old">
    {{#if lastWork }}
      <div class="filler work-data">
        <header>Last work:</header>
        <div class="value">submitted at <strong>{{formatDate lastWork.createdAt }}</strong></div>
      </div>
      {{> work_state work=lastWork id=lastWork._id }}
      <div class="splitter light"></div>
      <div class="block actions">
        <div class="button submit-button">Resubmit...</div>
        {{#if canReview }}
          <div class="button review-button">Review works</div>
        {{/if}}
      </div>
      <div class="works-history">
        {{#if isHistoryExist }}
          <div class="expand-history">
            <span class="hint">Previously submitted ({{ previousWorksCount }})</span>
            <span class="glyphicon glyphicon-menu-down"></span>
          </div>
        {{/if}}
      </div>
    {{else}}
      {{ > assignment_state_new }}
    {{/if}}
  </section>
</template>

<template name="assignment_state_new">
  <div class="filler work-data">
    <div class="value">submit by <strong>{{formatDate dueDate }}</strong></div>
  </div>
  <div class="block actions">
    <div class="button primary submit-button">Submit your work...</div>
  </div>
</template>

<template name="assignment_done_reviews">
  <div class="assignment-state">
    <article class="step-widget made-reviews">
    <div class="indicator"><i class="fa fa-eye"></i></div>
    <header>your reviews</header>
    <section class="content reviews-list">
      <div class="review-badge required">
        <div class="user">
          <i class="fa fa-user"></i>
        </div>
        <div class="score">8</div>
      </div>
      <div class="review-badge required done">
        <div class="user"></div>
        <div class="score">4</div>
      </div>
      <div class="review-badge required done fixed">
        <div class="user"></div>
        <div class="score">6</div>
      </div>
      <div class="review-badge required">
        <div class="user"></div>
        <div class="score">1</div>
      </div>
      <div class="review-badge required"></div>
      <div class="review-badge">
        <div class="user"></div>
        <div class="score">1</div>
      </div>
      <div class="review-badge done fixed">
        <div class="user"></div>
        <div class="score">5</div>
      </div>
      <div class="review-badge"></div>
      <div class="review-badge"></div>
    </section>
    <footer>The more reviews you make, the more you will get for your work.</footer>
    <div class="action"><i class="fa fa-plus"></i></div>
  </article>
  </div>
</template>